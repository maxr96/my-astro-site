---
import BaseLayout from '../layouts/BaseLayout.astro';
import MorePosts from '../components/post/MorePosts.astro';
import { getCollection } from 'astro:content';

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = await getCollection('posts')
	.then(it => it.sort((a,b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()));
---

<BaseLayout title="Posts">
    <MorePosts posts={posts}/>
</BaseLayout>